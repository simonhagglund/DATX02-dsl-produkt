\documentclass[final]%removes todos & new/mod color
{article}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Imports.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage[left=4.5cm,top=4.5cm,right=4.5cm,nofoot]{geometry}% Kopierad från rapporten, med de här inställningarna blir namnen tre per rad ist för 4 och 2
\usepackage[left=3cm,top=3cm,right=3cm]{geometry} %avstånd till kanter
%\usepackage{a4wide}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{float}
\usepackage{csquotes}
\usepackage{comment}
\usepackage{biblatex}
\usepackage{array, booktabs}
\usepackage[x11names,table]{xcolor}
\usepackage[margin=1cm]{caption}
\usepackage[TS1,T1]{fontenc}
\usepackage[obeyFinal]{todonotes}
\usepackage{ifthen}
\usepackage{tocloft}
\usepackage{transparent}
\usepackage{amsmath,amssymb,amsfonts,amsthm}
\usepackage{mathtools}
\usepackage{mathrsfs}
\usepackage{tikz}
    \usetikzlibrary{shapes,arrows}
\usepackage{ifdraft}
\usepackage{hyperref}
\usepackage{physics} % some convenient commands, for example \abs for absolute value, \dd for differential 
%\usepackage{mathabx} % For convolution asterisks; do we use this? Clash with physics 
\usepackage{subfiles} % Ladda denna sist.
\usepackage{parskip}
\usepackage{minted} % Highlights code.

%%%% TIKZ
\tikzstyle{block} = [draw, %fill=blue!20, rectangle, 
    minimum height=3em, minimum width=6em, rounded corners]
\tikzstyle{sum} = [draw, %fill=blue!20, 
    circle, node distance=1cm]
\tikzstyle{input} = [coordinate]
\tikzstyle{output} = [coordinate]
\tikzstyle{pinstyle} = [pin edge={to-,thin,black}]
%%%%

%%%% code number set/reset
%\def\LNContinue{\lstset{firstnumber=last}}
%\def\LNReset{\lstset{firstnumber=1}}
\def\LNContinue{\setminted{firstnumber=last}}
\def\LNReset{\setminted{firstnumber=1}}
%%%%

\newcounter{codecount}

\usepackage{xcolor}
\usepackage{listings}

\renewcommand\listingscaption{Code} % Same as below, but for new environment with "minted"
\renewcommand{\lstlistingname}{Code} % Changes captions of code blocks to start with "Code #: " instead of "Listing #: "
\renewcommand{\lstlistlistingname}{List of \lstlistingname s} % Related to above line. (Probably not needed)
\lstloadlanguages{Haskell}
\newminted[code]{haskell}{}
\newminted[code']{haskell}{}

% \lstnewenvironment{code}[1][]{\lstset{#1}}{}
%     \lstset{ % Global options
%     language=Haskell,
%     %basicstyle=\ttfamily,
%     %keywordstyle=\color{blue},
%     %backgroundcolor=\color{gray}
%     %frame=single,
%     backgroundcolor=\color{lightgray},
%     xleftmargin=20pt,
%     stepnumber=1,       % the step between two line-numbers. If it's 1, each line will be numbered
%     numbers=left,
%     numbersep=10pt,     % how far the line-numbers are from the code
%     numberstyle=\rmfamily\scriptsize\color[gray]{0.3}, %font,size,color{0=black, 1= white}
%     captionpos=b,
%     tabsize=2,
%     commentstyle=\it,
%     stringstyle=\mdseries\rmfamily,
%     showspaces=false,
%     keywordstyle=\bfseries\rmfamily,
%     %columns=flexible, % this line made the code not be monospace. Do we want it still? 
%     basicstyle=\small\rmfamily,
%     showstringspaces=false,
%     morecomment=[l]\%,    
% }

\lstnewenvironment{codeeq}{ % I tried something, not sure whether to keep it 
    \lstset{language=Haskell,
    basicstyle=\ttfamily,
    %keywordstyle=\color{blue},
    %backgroundcolor=\color{gray}
    %frame=single,
    backgroundcolor=\color{white},
    xleftmargin=50pt,
    %stepnumber=1,       % the step between two line-numbers. If it's 1, each line will be numbered
    numbers=none,
    %numbersep=10pt,     % how far the line-numbers are from the code
    %numberstyle=\rmfamily\scriptsize\color[gray]{0.3}, %font,size,color{0=black, 1= white}
    captionpos=b,
    tabsize=2,
    commentstyle=\it,
    stringstyle=\mdseries\rmfamily,
    showspaces=false,
    keywordstyle=\bfseries\rmfamily,
    %columns=flexible,
    %basicstyle=\small\rmfamily,
    showstringspaces=false,
    morecomment=[l]\%,    
}}{}

%%%%% Minted 
\setminted{bgcolor=black!10, linenos, escapeinside=\%\%}
\setmintedinline{bgcolor={}, escapeinside=;;}

% env to surround minted with to add caption and label
\newenvironment{codefig}{\captionsetup{type=listing}}{}
\setlength{\abovecaptionskip}{-2pt plus 3pt minus 2pt}

%%%%
\newenvironment{newtext}{\ifoptionfinal{}{\color{Green4}}}{\ignorespacesafterend}
\newenvironment{modtext}{\ifoptionfinal{}{\color{Khaki4}}}{\ignorespacesafterend}
%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Cool Latex stuff.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% help for \smashoperator
\DeclareMathOperator*{\sumprod}{\sum\prod}
%%

\DeclareCaptionFont{blue}{\color{LightSteelBlue3}}
\addbibresource{refs.bib}
%\setlength{\marginparwidth}{4.3cm}
\newcommand{\foo}{\color{LightSteelBlue3}\makebox[0pt]{\textbullet}\hskip-0.5pt\vrule width 1pt\hspace{\labelsep}}

\hypersetup{
    colorlinks=true,
    linkcolor=orange,
    filecolor=magenta,      
    urlcolor=blue,
}

% Adds choice for hiding stuff when we are in a writing phase. 
\newboolean{DELOPMENT}
\setboolean{DELOPMENT}{false}   

% quick color names for ease of remembering
\colorlet{urgent}{red}
\colorlet{fixme}{orange}
\colorlet{lessurgent}{blue!20} 
\colorlet{other}{yellow!30} 


%%%%% New commands 

\newcommand{\Lplc}{\mathscr{L}} % laplace transform 
\newcommand{\conv}{\Ast}
\newcommand{\Ast}{\circledast} % convolution symbol
%\newcommand{\lc}[2]{\ensuremath{%\lambda 
\newcommand{\lc}[2]{#1 \mapsto #2}
\newcommand{\fcn}[2]{#1 \mapsto #2}
\newcommand{\cmd}[1]{\mintinline{haskell}{#1}} % for typesetting commands


%%%%% Temporary example environment
\theoremstyle{definition} % non-italic text in examples
\newtheorem{example}{Example}
\newtheorem*{solution}{Solution}
\newtheorem{exercise}{Exercise}


% ToC depth
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}
\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\vspace{2mm}\\}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Title page.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Educational Language of Control Theory?
% Teaching Control?
% Domain Specific Education, Control Edition?
% Learning the Language of Control?
% Learning Material for Control Theory with Domain-Specific Languages?
% Demystifying syntax and semantics of control theory.  
% Controlling Education through Domain Specific Languages 
\title{{\Huge Domain-specific languages of Control~Theory}
\vspace*{5.5mm}
% (Using Domain-specific Languages?)
\\ {\Large A supplementary learning material for ERE103} 

\vspace*{10mm}
\begin{figure}[H]
    \centering
    \includegraphics[scale= 0.5]{Images/dusch.png}
\end{figure}
\vspace*{10mm}
}
  
\author{
    
    %\vspace*{0.001pt}
    Jakob Fihlman \and
    \vspace*{0.001pt}
    Simon Hägglund \and 
    Christian Josefson \and 
    Filip Nylander \and
    Elin Ohlman \and 
    Tommy Räjert 
    
    }
\bigskip
\date{\vspace*{5mm} Spring - 2020} % unless anyone comes up with anything better 

\begin{document}

\maketitle
\thispagestyle{empty}

\ifDELOPMENT
Proposed colour coding for todo notes. TR
\setlength{\marginparwidth}{2.6cm}
\todo[color=gray!10]{Colour coding:}
%\setlength{\marginparwidth}{4.3cm}
\todo[color=urgent]{Urgent comments}
\todo[color=fixme]{Fix-me comments}
\todo[color=lessurgent]{Less urgent comments}
\todo[color=other]{Other highlights}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Table of contents.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\renewcommand*\contentsname{Table of Contents}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}

\tableofcontents
\newpage
\subfile{Introduction}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Sections
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subfile{prerequisites}

%\subfile{laplacetransform} 
\subfile{laplace-rewrite}
\subfile{transferfunctions}
\subfile{nyquist_t}
\transparent{.5}
%\subfile{nyqvist}
\transparent{1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Appendix stuff
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\appendix
\subfile{appendix}

\end{document}
